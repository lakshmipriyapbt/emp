FROM openjdk:21-jdk

WORKDIR /app

COPY /var/lib/jenkins/workspace/ems-deployement/identity/gradle /app/gradle
COPY /var/lib/jenkins/workspace/ems-deployement/identity/gradlew /app/
COPY /var/lib/jenkins/workspace/ems-deployement/identity/build.gradle /app/
COPY /var/lib/jenkins/workspace/ems-deployement/identity/settings.gradle /app/

COPY /var/lib/jenkins/workspace/ems-deployement/identity/src /app/src

RUN chmod +x gradlew

RUN ./gradlew build

EXPOSE 9090

CMD ["java", "-jar", "build/libs/identity.jar"]
