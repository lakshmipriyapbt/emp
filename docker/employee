FROM openjdk:21-jdk

WORKDIR /app

COPY /var/lib/jenkins/workspace/ems-deployement/employee/gradle /app/gradle
COPY /var/lib/jenkins/workspace/ems-deployement/employee/gradlew /app/
COPY /var/lib/jenkins/workspace/ems-deployement/employee/build.gradle /app/
COPY /var/lib/jenkins/workspace/ems-deployement/employee/settings.gradle /app/
COPY /var/lib/jenkins/workspace/ems-deployement/employee/src /app/src


RUN chmod +x gradlew 

RUN chmod +x employee/gradlew

RUN ./gradlew build

EXPOSE 8092	

ENTRYPOINT ["java", "-jar", "/app/identity/build/libs/employee.jar"]
